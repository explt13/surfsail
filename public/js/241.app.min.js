"use strict";(self.webpackChunksurfsail=self.webpackChunksurfsail||[]).push([[241],{241:(e,t,s)=>{s.r(t),s.d(t,{initAuth:()=>f});var a=s(244);const n=(e,t,s,n,o=!0)=>{const i=e.parentNode,c=t.cloneNode(!0);r(i),i.classList.contains("_error")||(i.classList.add("_error"),i.appendChild(c),setTimeout((()=>{c.classList.add("_show-up");const e=(0,a.Ay)(c,{content:s,theme:"error"});c.addEventListener("touchstart",(t=>{t.stopPropagation(),e.show()}))}),5))},o=(e,t)=>{const s=e.parentNode,a=t.cloneNode(!0);r(s),s.classList.contains("_success")||(s.classList.add("_success"),s.appendChild(a),setTimeout((()=>{a.classList.add("_show-up")}),5))},r=e=>{if(e.classList.contains("_error")){e.classList.remove("_error");const t=e.querySelector(".form__field-result_error");t&&(t.classList.remove("_show-up"),e.removeChild(t))}if(e.classList.contains("_success")){e.classList.remove("_success");const t=e.querySelector(".form__field-result_success");t&&(t.classList.remove("_show-up"),e.removeChild(t))}},i=e=>{let t=e.querySelectorAll(".form__field._req:not([hidden]) input");const s=(()=>{const e=document.createElement("span");return e.classList.add("_icon-notif_alert"),e.classList.add("form__field-result"),e.classList.add("form__field-result_error"),e})(),a=(()=>{const e=document.createElement("span");return e.classList.add("_icon-notif_success"),e.classList.add("form__field-result"),e.classList.add("form__field-result_success"),e})(),n=new Map;document.addEventListener("revalidate",(function(s){t=e.querySelectorAll(".form__field._req:not([hidden]) input")}));const o=function(e,t){let s;return function(...t){clearTimeout(s),s=setTimeout((()=>e.apply(this,t)),500)}}(l);t.forEach((t=>{t.addEventListener("input",(function(){o(e,t,n,a,s,0)})),t.addEventListener("blur",(()=>{l(e,t,n,a,s,0)}));const r=parseInt(t.dataset.minlen)||0,i=parseInt(t.dataset.maxlen)||0;r+i!==0&&n.set(t,{minlen:r,maxlen:i}),t.value&&l(e,t,n,a,s,0)})),c(e,0,t)},c=(e,t,s)=>{e.addEventListener("submit",(async t=>{t.preventDefault(),s.forEach((t=>{l(e,t,fieldMap,successEl,errorEl,0)}));{const t=new CustomEvent("formValidated");e.dispatchEvent(t)}}))},l=(e,t,s,a,r,i)=>{if(t.hasAttribute("alphanumeric")&&!function(e){let t,s,a;for(s=0,a=e.length;s<a;s++)if(t=e.charCodeAt(s),!(t>47&&t<58||t>64&&t<91||t>96&&t<123))return!1;return!0}(t.value))return void n(t,r,`${t.dataset.name} can contain: a-zA-Z0-9`);const c=s.get(t);if(c){const e=parseInt(c.minlen),s=parseInt(c.maxlen),a=t.dataset.name,o=(e>0?2:0)|(s>0?1:0);if(!u(t.value,e,s)){switch(o){case 3:n(t,r,`${a} must be between ${e} and ${s} characters`);break;case 2:n(t,r,`${a} must be at least ${e} characters`);break;case 1:n(t,r,`${a} must be fewer than ${s} characters`)}return}}if("checkbox"!==t.type||!0===t.checked)if(!t.classList.contains("form__email")&&"email"!==t.type||m(t.value)){if(!e.closest(".auth__body").classList.contains("_login")){if(t.classList.contains("form__password")){const s=e.querySelector(".form__password-confirm")||e.querySelector("[pswd-confirm]");if(s&&!d(t,a,r,i,s))return}if(t.classList.contains("form__password-confirm")||t.hasAttribute("pswd_confirm")){const s=e.querySelector(".form__password");if(!d(t,a,r,i,s))return}}o(t,a)}else n(t,r,"Email is not valid");else n(t,r,"Field is required")},d=(e,t,s,a,r)=>e.value!==r.value?(n(e,s,"Passwords must match"),n(r,s,"Passwords must match",0,!1),!1):(o(r,t),!0),u=(e,t,s)=>(!t||e.length>=t)&&(!s||e.length<=s),m=e=>String(e).match(/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/);var _=s(760);const f=()=>{(()=>{const e=document.querySelectorAll(".form-validate");e.length>0&&e.forEach((e=>{i(e)}))})(),(0,_.BH)(),(0,_.ZC)();const e=document.querySelector(".auth__change-form");if(!e)return;const t=new URLSearchParams(window.location.search);let s=t.get("auth");const a=t.get("r_link")?"&r_link="+t.get("r_link"):"";null===s&&(window.history.pushState({},"",window.location.origin+window.location.pathname+"?auth=login"+a),s="login");const n=document.querySelector(".auth__body"),o=n.querySelector(".auth__form").querySelector(".form__password-confirm").parentElement,r=document.querySelectorAll("[data-changeable]");n.classList.add(`_${s}`);const c=new CustomEvent("revalidate"),l={login:{switchFormButton:"Register",switchFormText:"Don't have an account?",submitFormButton:"Log in"},register:{switchFormButton:"Log in",switchFormText:"Already have an account?",submitFormButton:"Register"}};function d(e){"register"===e&&_slideDown(o,250),"login"===e&&_slideUp(o,250),r.forEach((e=>{e.classList.add("_fade_out")})),setTimeout((()=>{r.forEach((t=>{t.classList.remove("_fade_out"),t.classList.add("_fade_in"),t.textContent=l[e][t.dataset.name]})),document.dispatchEvent(c)}),250),setTimeout((()=>{r.forEach((e=>{e.classList.remove("_fade_in")}))}),500)}"register"===s?(o.style.removeProperty("display"),r.forEach((e=>{e.textContent=l[s][e.dataset.name]}))):"login"===s&&r.forEach((e=>{e.textContent=l[s][e.dataset.name]})),e.addEventListener("click",(function(){"login"===s?(n.classList.remove("_login"),n.classList.add("_register"),s="register",d(s),window.history.pushState({},"",window.location.origin+window.location.pathname+"?auth="+s+a)):"register"===s&&(n.classList.remove("_register"),n.classList.add("_login"),s="login",d(s),window.history.pushState({},"",window.location.origin+window.location.pathname+"?auth="+s+a))}))}}}]);